{
  "SaveName": "Exodites (by Nocunox)",
  "GameMode": "Dark Forest Background",
  "Date": "10/24/2020 9:39:40 PM",
  "Gravity": 0.5,
  "PlayArea": 0.5,
  "GameType": "",
  "GameComplexity": "",
  "Tags": [],
  "Table": "Table_Custom_Square",
  "TableURL": "http://cloud-3.steamusercontent.com/ugc/786352830164238088/626FBE2C7FECD7A7BFFF71C5DFD0F150F67334C1/",
  "Sky": "Sky_Regal",
  "SkyURL": "https://emergentlandscapes.files.wordpress.com/2012/05/the-witcher-pano_-8.jpg",
  "Note": "",
  "Rules": "",
  "MusicPlayer": {
    "RepeatSong": true,
    "PlaylistEntry": -1,
    "CurrentAudioTitle": "Ultramarines Chant",
    "CurrentAudioURL": "http://cloud-3.steamusercontent.com/ugc/773976977327440295/17C1CAA1F70F178395E93C05E55946061E695598/",
    "AudioLibrary": [
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/773976977327440295/17C1CAA1F70F178395E93C05E55946061E695598/",
        "Item2": "Ultramarines Chant"
      }
    ]
  },
  "Grid": {
    "Type": 0,
    "Lines": false,
    "Color": {
      "r": 0.0,
      "g": 0.0,
      "b": 0.0
    },
    "Opacity": 0.75,
    "ThickLines": false,
    "Snapping": false,
    "Offset": false,
    "BothSnapping": false,
    "xSize": 0.0,
    "ySize": 0.0,
    "PosOffset": {
      "x": 0.0,
      "y": 1.0,
      "z": 0.0
    }
  },
  "Lighting": {
    "LightIntensity": 0.54,
    "LightColor": {
      "r": 1.0,
      "g": 0.9804,
      "b": 0.8902
    },
    "AmbientIntensity": 1.3,
    "AmbientType": 0,
    "AmbientSkyColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "AmbientEquatorColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "AmbientGroundColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "ReflectionIntensity": 1.0,
    "LutIndex": 0,
    "LutContribution": 1.0
  },
  "Hands": {
    "Enable": true,
    "DisableUnused": false,
    "Hiding": 0,
    "HandTransforms": [
      {
        "Color": "Red",
        "Transform": {
          "posX": -9.482677,
          "posY": 2.85128331,
          "posZ": -28.566576,
          "rotX": 0.0,
          "rotY": 0.0,
          "rotZ": 0.0,
          "scaleX": 9.482673,
          "scaleY": 6.6973877,
          "scaleZ": 3.55600476
        }
      },
      {
        "Color": "Yellow",
        "Transform": {
          "posX": -28.6376839,
          "posY": 2.85128331,
          "posZ": 9.48268,
          "rotX": 0.0,
          "rotY": 90.0,
          "rotZ": 0.0,
          "scaleX": 9.484813,
          "scaleY": 6.6973877,
          "scaleZ": 3.55709672
        }
      },
      {
        "Color": "Purple",
        "Transform": {
          "posX": 28.5665646,
          "posY": 2.85128331,
          "posZ": 9.48268,
          "rotX": 0.0,
          "rotY": 270.0,
          "rotZ": 0.0,
          "scaleX": 9.484813,
          "scaleY": 6.6973877,
          "scaleZ": 3.55709672
        }
      },
      {
        "Color": "Blue",
        "Transform": {
          "posX": 11.8414936,
          "posY": 2.85128331,
          "posZ": 28.6732559,
          "rotX": 0.0,
          "rotY": 179.8,
          "rotZ": 0.0,
          "scaleX": 9.485635,
          "scaleY": 6.6973877,
          "scaleZ": 3.55701685
        }
      },
      {
        "Color": "White",
        "Transform": {
          "posX": 9.482677,
          "posY": 2.85128331,
          "posZ": -28.60213,
          "rotX": 0.0,
          "rotY": 0.0,
          "rotZ": 0.0,
          "scaleX": 9.482673,
          "scaleY": 6.697391,
          "scaleZ": 3.55600476
        }
      },
      {
        "Color": "Green",
        "Transform": {
          "posX": -10.3242645,
          "posY": 2.85128331,
          "posZ": 28.6732559,
          "rotX": 0.0,
          "rotY": 180.0,
          "rotZ": 0.0,
          "scaleX": 9.482673,
          "scaleY": 6.6973877,
          "scaleZ": 3.55600476
        }
      },
      {
        "Color": "Pink",
        "Transform": {
          "posX": 28.5665646,
          "posY": 2.85128331,
          "posZ": -9.399705,
          "rotX": 0.0,
          "rotY": 270.0,
          "rotZ": 0.0,
          "scaleX": 9.484813,
          "scaleY": 6.6973877,
          "scaleZ": 3.55709672
        }
      },
      {
        "Color": "Orange",
        "Transform": {
          "posX": -28.6021252,
          "posY": 2.85128331,
          "posZ": -9.672333,
          "rotX": 0.0,
          "rotY": 90.0,
          "rotZ": 0.0,
          "scaleX": 9.484813,
          "scaleY": 6.6973877,
          "scaleZ": 3.55709672
        }
      }
    ]
  },
  "Turns": {
    "Enable": false,
    "Type": 0,
    "TurnOrder": [],
    "Reverse": false,
    "SkipEmpty": false,
    "DisableInteractions": false,
    "PassTurns": true,
    "TurnColor": ""
  },
  "TabStates": {
    "0": {
      "title": "Rules",
      "body": "",
      "color": "Grey",
      "visibleColor": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "id": 0
    },
    "1": {
      "title": "White",
      "body": "",
      "color": "White",
      "visibleColor": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "id": 1
    },
    "2": {
      "title": "Brown",
      "body": "",
      "color": "Brown",
      "visibleColor": {
        "r": 0.443,
        "g": 0.231,
        "b": 0.09
      },
      "id": 2
    },
    "3": {
      "title": "Red",
      "body": "",
      "color": "Red",
      "visibleColor": {
        "r": 0.856,
        "g": 0.1,
        "b": 0.094
      },
      "id": 3
    },
    "4": {
      "title": "Orange",
      "body": "",
      "color": "Orange",
      "visibleColor": {
        "r": 0.956,
        "g": 0.392,
        "b": 0.113
      },
      "id": 4
    },
    "5": {
      "title": "Yellow",
      "body": "",
      "color": "Yellow",
      "visibleColor": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.172
      },
      "id": 5
    },
    "6": {
      "title": "Green",
      "body": "",
      "color": "Green",
      "visibleColor": {
        "r": 0.192,
        "g": 0.701,
        "b": 0.168
      },
      "id": 6
    },
    "7": {
      "title": "Blue",
      "body": "",
      "color": "Blue",
      "visibleColor": {
        "r": 0.118,
        "g": 0.53,
        "b": 1.0
      },
      "id": 7
    },
    "8": {
      "title": "Teal",
      "body": "",
      "color": "Teal",
      "visibleColor": {
        "r": 0.129,
        "g": 0.694,
        "b": 0.607
      },
      "id": 8
    },
    "9": {
      "title": "Purple",
      "body": "",
      "color": "Purple",
      "visibleColor": {
        "r": 0.627,
        "g": 0.125,
        "b": 0.941
      },
      "id": 9
    },
    "10": {
      "title": "Pink",
      "body": "",
      "color": "Pink",
      "visibleColor": {
        "r": 0.96,
        "g": 0.439,
        "b": 0.807
      },
      "id": 10
    },
    "11": {
      "title": "Black",
      "body": "",
      "color": "Black",
      "visibleColor": {
        "r": 0.25,
        "g": 0.25,
        "b": 0.25
      },
      "id": 11
    }
  },
  "DecalPallet": [],
  "ObjectStates": [
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 16.01253,
        "posY": 1.52691174,
        "posZ": 19.547699,
        "rotX": -1.34303764E-06,
        "rotY": 89.99831,
        "rotZ": -3.03865249E-07,
        "scaleX": 0.06,
        "scaleY": 0.06,
        "scaleZ": 0.06
      },
      "Nickname": "Spirit Crystal",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://www.dropbox.com/s/sg25yhxmm0cmh5k/Storm_Doodad_KingsCrest_MineCrystals_04.m3.obj?dl=1",
        "DiffuseURL": "https://www.dropbox.com/s/nx4nzxwq3lystqg/storm_kingscrest_minecrystals_blue_diff.jpg?dl=1",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 0,
        "TypeIndex": 0,
        "CustomShader": {
          "SpecularColor": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "SpecularIntensity": 0.5,
          "SpecularSharpness": 7.0,
          "FresnelStrength": 0.4
        },
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "a0f61f"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": -5.737873,
        "posY": 0.9739932,
        "posZ": 25.5422211,
        "rotX": 1.50261558E-05,
        "rotY": 59.9839172,
        "rotZ": 1.73573267E-06,
        "scaleX": 0.975000143,
        "scaleY": 0.975000143,
        "scaleZ": 0.975000143
      },
      "Nickname": "8/8 Avatar Of Kurnous",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  2+  2+  6   6   8   5   9      3+\r\n[e85545]Weapons[-]\r\n[c6c930]Sword Of Kurnous (melee)\r\n[-] Melee S:+2 AP:-4 D:D6 Sp?:*\r\n[c6c930]Sword Of Kurnous (shooting)\r\n[-]12\" Assault 1 S:8 AP:-4 D:D6 Sp?:*\r\n[dc61ed]Abilities[-]\r\nIshaâs Crystals\r\nStrike and Fade:\r\nDaemon\r\nKurnous Returned\r\nSpirit Body\r\nKurnous Defiant\r\nLovers Reunited\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992162049,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/942838965131738241/1D91991FF9A50F8E516FF0A041BA5687B25A1A7E/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/942838965131721694/27D357D4D2255734DE7A8A93541AB2EB28E8A716/",
        "NormalURL": "",
        "ColliderURL": "http://pastebin.com/raw.php?i=KAeNs1LY",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Avatar Of Kurnous\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 235pts 12 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Avatar Of Kurnous, Character, Daemon, Faction: Exodites, Heavy Support, Monster\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"620\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"111 588\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Daemon\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"The Avatar of Kurnous has a 5+ invulnerable save.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ishaâs Crystals\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Instead of moving in their movement phase. This unit may place a Spirit Crystal within 3â of this unit on the battlefield. No more than 3 Spirit Crystals may be on the battlefield at once\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"100\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Kurnous Defiant\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"EXODITE units within 6â of the Avatar of Kurnous may choose to fight first in the fight phase, even if they were charged this turn, if an enemy has a similar ability that allows them to fight first, players ulternate, with the player whoâs turn it is choosing first.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Kurnous Returned\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Friendly EXODITE units within 12\\u{201D} of the Avatar of Kurnous do not take Morale tests, and you can re-roll failed charge rolls for these units.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-4\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Lovers Reunited\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If there is a Messenger of Isha model within 6â of this model. Avatar of Kurnous gains an extra attack, and wounds allocated to Messenger of Isha, may be allocated to Avatar of Kurnous instead.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-5\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Spirit Body\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Roll a D6 whenever the Avatar of Kurnous suffers a wound or mortal wound. On a 5+ that wound is ignored.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-6\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"95 67 67 67 67 67 67 67 67 67\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Avatar Of Kurnous\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"9\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"200\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"110 49 49 49 49 49 343\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Sword Of Kurnous (melee)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"+2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Roll two dice when inflicting damage with this weapon and discard the lowest result.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Sword Of Kurnous (shooting)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"12\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Assault 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Roll two dice when inflicting damage with this weapon and discard the lowest result.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:baf6-b9e5-951d-7de6\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "b593fb"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 8.83892,
        "posY": 0.959693968,
        "posZ": 25.0330124,
        "rotX": 6.745225E-07,
        "rotY": 210.012329,
        "rotZ": 2.51489354E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "12/12 Terradon",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n  *   *   *  6   7  12   3   8      4+\r\n[e85545]Weapons[-]\r\n[c6c930]Titanic Feet\r\n[-] Melee S:User AP:-2 D:D3 Sp?:*\r\n[c6c930]3x Bright Lance\r\n[-]36\" Heavy 1 S:8 AP:-4 D:D6 Sp?:-\r\n[dc61ed]Abilities[-]\r\nScattershield\r\nCrystal Targeting Matrix\r\nAdvance of the Dragon\r\nOpen Topped\r\nDeath Throws\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/786353847609114887/472D9937FB2A69893B45B8E2838FAA63F6E2A960/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786353847609120859/D835BD26CEB8AC0D0BE99FA2BD800BF3AD36C4B1/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Terradon\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 195pts 9 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Dedicated Transport, Dragon, Faction: Dragon Riders, Faction: Exodites, Monster, Terradon, Artillery, Transport\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"540\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"147 552\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Advance of the Dragon\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When this unit advances, add 6â to its move characteristic for that movement phase instead of rolling dice.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Crystal Targeting Matrix\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If the bearer Advances, until the end of the turn, the type of any Heavy weapons it is equipped with are changed to Assault (e.g. a Heavy D6 weapon becomes an Assault D6 weapon)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Death Throws\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If this model is reduced to 0 wounds, roll a dice before removing the model from the battlefield, on a 6 it lashes out in its death throes, and each unit within 3â suffers D3 mortal wounds.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"180\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Open Topped\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" Models embarked on this model can attack in their Shooting phase. Measure the range and draw a line of sight from any point on this model. When they do so, any restrictions or modifiers that apply to this model also apply to its passengers; for example, the passengers cannot shoot if this model has Fallen Back in the same turn, cannot shoot (except with pistols) if this model is within 1â of an enemy unit, and so on. Note that the passengers cannot shoot if this model falls back, even though the model itself can.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-4\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Scattershield\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A model equipped with a scattershield has a 5+ invulnerable save.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"147 552\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Transport\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Capacity\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Transport\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This model can transport 10 INFANTRY models. \"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"70 70 70 70 70 70 70 70 70 70\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Terradon\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"*\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"*\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"*\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"12\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-5\"\n                  , preferredHeight = \"200\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"58 58 58 58 58 58 347\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-5-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-5-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Bright Lance\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"36\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Heavy 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-5-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Titanic Feet\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When you make an attack with this weapon, roll three dice instead of 1.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-6\"\n                  , preferredHeight = \"280\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"116 116 155 155 155\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-6-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Wound Track\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Remaining W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Characteristic 1\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Characteristic 2\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Characteristic 3\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-6-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Terradon 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7-12\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-6-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Terradon 2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4-6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-6-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Terradon 3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1-3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:7e1d-262c-5885-eda2\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "9b7340"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": -7.51115561,
        "posY": 0.9779401,
        "posZ": 19.7919235,
        "rotX": -2.620923E-06,
        "rotY": 224.99939,
        "rotZ": 2.44216631E-06,
        "scaleX": 1.24999988,
        "scaleY": 1.24999988,
        "scaleZ": 1.24999988
      },
      "Nickname": "Pterosaur Rider",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n14\"  3+  3+  3   3   1   2   6      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Laser Lance (melee)\r\n[-] Melee S:User AP:-4 D:2 Sp?:*\r\n[c6c930]Laser Lance (shooting)\r\n[-]6\" Assault 1 S:6 AP:-4 D:2 Sp?:-\r\n[c6c930]Beak And Talons\r\n[-] Melee S:4 AP:0 D:1 Sp?:*\r\n[c6c930]Plasma Grenade\r\n[-]6\" Grenade D6 S:4 AP:-1 D:1 Sp?:*\r\n[dc61ed]Abilities[-]\r\nWinged Strike\r\nDive Attack\r\nBombs\r\nStrike and Fade:\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992167652,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1613934103784208038/EC16C21DBB676FDEA07E6A89F7084F95F92C685F/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/1613934103784164256/7CE30861AE4AA480FBB200B41C1C8A94F61D2956/",
        "NormalURL": "",
        "ColliderURL": "http://pastebin.com/raw.php?i=KAeNs1LY",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function onLoad()\n  self.setVar(\"desc-id\", \"957d7483:ff9c-fc4b-2094-70fc\")\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "6e0401"
    },
    {
      "Name": "Custom_Assetbundle",
      "Transform": {
        "posX": 4.39816856,
        "posY": 1.00346,
        "posZ": 25.2194519,
        "rotX": 1.22509992,
        "rotY": 195.051453,
        "rotZ": 0.338492334,
        "scaleX": 0.7000002,
        "scaleY": 0.7000002,
        "scaleZ": 0.7000002
      },
      "Nickname": "24/24 Megasaur",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n  *   *   *  8   8  24   4   8      4+\r\n[e85545]Weapons[-]\r\n[c6c930]Titanic Feet\r\n[-] Melee S:User AP:-2 D:D3 Sp?:*\r\n[c6c930]Scatter Laser\r\n[-]36\" Heavy 4 S:6 AP:0 D:1 Sp?:-\r\n[c6c930]Suncannon\r\n[-]48\" Heavy 2D6 S:6 AP:-3 D:2 Sp?:*\r\n[c6c930]Heavy D-scythe\r\n[-]16\" Assault D3 S:12 AP:-4 D:2 Sp?:*\r\n[dc61ed]Abilities[-]\r\nAdvance of the Dragon\r\nDevastating Charge\r\nScattershield\r\nCatastrophic Collapse\r\nUnstoppable\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomAssetbundle": {
        "AssetbundleURL": "http://cloud-3.steamusercontent.com/ugc/788603992012296986/107ED47B3D783AA79C5398BD57B40EE805811FFF/",
        "AssetbundleSecondaryURL": "",
        "MaterialIndex": 0,
        "TypeIndex": 0,
        "LoopingEffectIndex": 0
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Megasaur\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 375pts 27 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Artillery, Dragon, Faction: Dragon Riders, Faction: Exodites, Lord of War, Megasaur, Monster, Titanic\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"520\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"132 567\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Advance of the Dragon\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When this unit advances, add 6â to its move characteristic for that movement phase instead of rolling dice.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Catastrophic Collapse\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If this model is reduced to 0 wounds, roll a D6 before removing it from the battlefield. On a 6 it collapses with catastrophic effect, and each unit within 2D6\\u{201D} suffers D6 mortal wounds.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Devastating Charge\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" Add 2 to the strength of this unit's melee attack, if the unit charged in the same turn\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Scattershield\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A model equipped with a scattershield has a 5+ invulnerable save.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-4\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"160\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unstoppable\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A Megasaur can Fall Back in the Movement phase and still shoot and/or charge during its turn. When a Megasaur Falls Back, it can even move over enemy INFANTRY models, though at the end of its move it must be more than 1\\u{201D} from all enemy units. In addition, a Megasaur can move and fire Heavy weapons without suffering the penalty to its hit rolls. Finally, a Megasaur only gains a bonus to its save in cover if at least half of the model is obscured from the firer.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"70 70 70 70 70 70 70 70 70 70\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Megasaur\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"*\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"*\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"*\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"24\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"67 57 57 57 57 57 342\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Heavy D-scythe\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"16\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Assault D3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"12\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This weapon automatically hits its target.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Scatter Laser\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"36\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Heavy 4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Suncannon\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"48\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Heavy 2D6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Blast\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Titanic Feet\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When you make an attack with this weapon, roll three dice instead of 1.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-5\"\n                  , preferredHeight = \"280\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"116 116 155 155 155\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-5-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Wound Track\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Remaining W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Characteristic 1\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Characteristic 2\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Characteristic 3\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-5-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Megasaur 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"13-24\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-5-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Megasaur 2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7-12\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-5-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Megasaur 3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1-6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:ffe7-af60-3035-0666\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "59d99b"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": -9.657181,
        "posY": 0.977939963,
        "posZ": 18.7912617,
        "rotX": -1.13327212E-06,
        "rotY": 150.017883,
        "rotZ": -2.56883368E-06,
        "scaleX": 1.24999988,
        "scaleY": 1.24999988,
        "scaleZ": 1.24999988
      },
      "Nickname": "Pterosaur Rider",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n14\"  3+  3+  3   3   1   2   6      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Laser Lance (melee)\r\n[-] Melee S:User AP:-4 D:2 Sp?:*\r\n[c6c930]Laser Lance (shooting)\r\n[-]6\" Assault 1 S:6 AP:-4 D:2 Sp?:-\r\n[c6c930]Beak And Talons\r\n[-] Melee S:4 AP:0 D:1 Sp?:*\r\n[c6c930]Plasma Grenade\r\n[-]6\" Grenade D6 S:4 AP:-1 D:1 Sp?:*\r\n[dc61ed]Abilities[-]\r\nWinged Strike\r\nDive Attack\r\nBombs\r\nStrike and Fade:\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992167652,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1613934103784169757/00E480B4587E02D89169D86FC694BBDAB9F31150/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/1613934103784164256/7CE30861AE4AA480FBB200B41C1C8A94F61D2956/",
        "NormalURL": "",
        "ColliderURL": "http://pastebin.com/raw.php?i=KAeNs1LY",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function onLoad()\n  self.setVar(\"desc-id\", \"957d7483:ff9c-fc4b-2094-70fc\")\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "275f7c"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": -13.076335,
        "posY": 0.9596939,
        "posZ": 23.6608982,
        "rotX": -1.59663239E-06,
        "rotY": 135.017746,
        "rotZ": -6.659629E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "7/7 Tricer Of Vaul",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n10\"  3+  3+  5   5   7   4   6      4+\r\n[e85545]Weapons[-]\r\n[c6c930]Three Horned Attack\r\n[-] Melee S:User AP:-2 D:1 Sp?:-\r\n[c6c930]2x D-scythe\r\n[-]8\" Assault D3 S:10 AP:-4 D:1 Sp?:*\r\n[c6c930]Scatter Laser\r\n[-]36\" Heavy 4 S:6 AP:0 D:1 Sp?:-\r\n[dc61ed]Abilities[-]\r\nAdvance of the Dragon\r\nDevastating Charge\r\nStrike and Fade:\r\nThrill Of The Fight\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/786353459592161776/AEF2CF59FDE57A3F70B2C7DE080FD8CDDB5C0283/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786353459592154247/A0104BCD56B16FB5588FC3D779AF6EEFE51C7CAE/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Tricer Of Vaul\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 80pts 8 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Beast, Cavalry, Dragon, Elites, Faction: Dragon Riders, Faction: Exodites, Tricer Of Vaul\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"132 567\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Advance of the Dragon\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When this unit advances, add 6â to its move characteristic for that movement phase instead of rolling dice.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Devastating Charge\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" Add 2 to the strength of this unit's melee attack, if the unit charged in the same turn\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Thrill Of The Fight\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When this unit deals 3 unsaved wounds to an enemy unit in close combat, it gains a 4+ invulnerable save until the start of its owners next turn.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"80 68 68 68 68 68 68 68 68 68\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Tricer Of Vaul\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"10\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"280\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"109 69 69 69 69 69 242\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D-scythe\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Assault D3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"10\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This weapon automatically hits its target.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Scatter Laser\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"36\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Heavy 4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Three Horned Attack\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:82c2-b49c-399c-1d33\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "462976"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 13.8284674,
        "posY": 0.9877074,
        "posZ": 21.9241028,
        "rotX": 7.713398E-08,
        "rotY": 44.9899826,
        "rotZ": -3.386761E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "2/2 Dragon Knight",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n14\"  3+  3+  4   4   2   2   8      3+\r\n[e85545]Weapons[-]\r\n[c6c930]Laser Lance (melee)\r\n[-] Melee S:User AP:-4 D:2 Sp?:*\r\n[c6c930]Laser Lance (shooting)\r\n[-]6\" Assault 1 S:6 AP:-4 D:2 Sp?:-\r\n[c6c930]Crushing Teeth And Claws\r\n[-] Melee S:5 AP:-1 D:1 Sp?:*\r\n[dc61ed]Abilities[-]\r\nStrike and Fade:\r\nAdvance of the Dragon\r\nKnights Courage\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992165864,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776222744414061673/55CE9F0417B1D283CC7A0138409F47B76076F241/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/910170418286554727/EC0363D5E57828F8122CD47BD2BB22A9D64AFE3F/",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function onLoad()\n  self.setVar(\"desc-id\", \"957d7483:5c89-263e-7c37-1564\")\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "c46011"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": -0.316378832,
        "posY": 0.9596937,
        "posZ": 20.252388,
        "rotX": 2.322867E-06,
        "rotY": 14.9844637,
        "rotZ": 1.18439038E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Son Of Kurnous",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n                                      \r\n[e85545]Weapons[-]\r\n[c6c930]Kurnous Shard\r\n[-] Melee S:+2 AP:-3 D:3 Sp?:-\r\n[dc61ed]Abilities[-]\r\nFor Isha\r\nAcrobatic\r\nTrue Believer\r\nIshaâs Crystals\r\nStrike and Fade:\r\nMatchless Agility\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992167056,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/786352830164535087/A7E016CE127D4CF3F5F3C08CD082CE709CBFC25F/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786352830164536009/9A0AB802C925B9D646963BE88C64D8D5B418DF84/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function onLoad()\n  self.setVar(\"desc-id\", \"957d7483:2e84-830a-03ed-16e2\")\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "e957f0"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": -9.510912,
        "posY": 0.9597169,
        "posZ": 24.576128,
        "rotX": -3.48341837E-06,
        "rotY": 134.9887,
        "rotZ": 1.84805253E-06,
        "scaleX": 0.9250001,
        "scaleY": 0.9250001,
        "scaleZ": 0.9250001
      },
      "Nickname": "4/4 Carnodon Rider",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 8\"  3+  3+  5   7   4   2   6      4+\r\n[e85545]Weapons[-]\r\n[c6c930]D-scythe\r\n[-]8\" Assault D3 S:10 AP:-4 D:1 Sp?:*\r\n[c6c930]Crushing Bite\r\n[-] Melee S:+2 AP:-3 D:D3 Sp?:*\r\n[dc61ed]Abilities[-]\r\nAdvance of the Dragon\r\nDevastating Charge\r\nThrill Of The Fight\r\nStrike and Fade:\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776222744414028407/DA42C2B6C3373F350960A48650886B2A51CBE29F/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786353138696560226/F58483FD1175116C00157285AB09A6D25D1B60C6/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Carnodon Riders\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 114pts 11 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Carnodon Riders, Cavalry, Dragon, Elites, Faction: Dragon Riders, Faction: Exodites\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"132 567\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Advance of the Dragon\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When this unit advances, add 6â to its move characteristic for that movement phase instead of rolling dice.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Devastating Charge\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" Add 2 to the strength of this unit's melee attack, if the unit charged in the same turn\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Thrill Of The Fight\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When this unit deals 3 unsaved wounds to an enemy unit in close combat, it gains a 4+ invulnerable save until the start of its owners next turn.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"80 68 68 68 68 68 68 68 68 68\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Carnodon Rider\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"200\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"55 51 51 51 51 51 386\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Crushing Bite\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"+2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"After a model on this mount makes its close combat attacks, you can attack with its mount. Make 2 additional attacks, using this weapon profile\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D-scythe\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Assault D3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"10\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This weapon automatically hits its target.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:f343-0e03-07d2-2497\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "de0935"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 15.081872,
        "posY": 0.9877068,
        "posZ": 21.2073364,
        "rotX": 2.19618684E-07,
        "rotY": 45.015728,
        "rotZ": -3.19049241E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "3/3 Dragon Knight Leader",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n14\"  3+  3+  4   4   3   3   8      3+\r\n[e85545]Weapons[-]\r\n[c6c930]Crushing Teeth And Claws\r\n[-] Melee S:5 AP:-1 D:1 Sp?:*\r\n[dc61ed]Abilities[-]\r\nExpert Hunter\r\nStrike and Fade:\r\nAdvance of the Dragon\r\nKnights Courage\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992165864,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776222744414061673/55CE9F0417B1D283CC7A0138409F47B76076F241/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/1458555028228322350/A59F4B5C3A6B9C2BEDFF83E2995484EDB5A15772/",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function onLoad()\n  self.setVar(\"desc-id\", \"957d7483:5c89-263e-7c37-1564\")\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "6efbd3"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 0.8453446,
        "posY": 0.959694,
        "posZ": 20.2258186,
        "rotX": 1.03943489E-06,
        "rotY": 0.006360986,
        "rotZ": 1.6996519E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "3/3 Draâarch ",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  3+  3+  3   3   3   2   8      4+\r\n[e85545]Weapons[-]\r\n[c6c930]Shuriken pistol\r\n[-]12\" Pistol 1 S:4 AP:0 D:1 Sp?:*\r\n[c6c930]Biting Blade\r\n[-] Melee S:+2 AP:-1 D:2 Sp?:-\r\n[dc61ed]Abilities[-]\r\nDragon Guide\r\nDragon Protector\r\nDragon Bone Armour\r\nStrike and Fade:\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.99216634,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/786353847609801864/6FC5D41AC3B2368DFC9F0CA40E1782AD2D9687A2/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786353847609802843/2A28DF122CF999568DDC3C82709106A96FBF2A63/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Draâarch \"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 50pts 6 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Draâarch , Elites, Faction: Exodites, Infantry\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"116 583\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Dragon Bone Armour\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This unit has a 4+ invulnerable save.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Dragon Guide\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Any DRAGON units within 12â off this unit may add one D6 to their roll, when attempting a charge.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Dragon Protector\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Your opponent must subtract 1 from any hit rolls in the fight phase that target a Dragon unit within 6â of this unit.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"70 70 70 70 70 70 70 70 70 70\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Draâarch \"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"200\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"63 50 50 50 50 50 381\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Biting Blade\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"+2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Shuriken pistol\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"12\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Pistol 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Each time you make a wound roll of 6+ for this weapon, that hit is resolved with an AP of -3 instead of 0.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:545f-730b-0db2-40a9\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "82e038"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": -1.69121218,
        "posY": 0.959694,
        "posZ": 20.1691,
        "rotX": 2.67360065E-06,
        "rotY": 104.999069,
        "rotZ": 2.55411283E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Child Of Isha",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  3+  3+  3   3   1   1   8      6+\r\n[e85545]Weapons[-]\r\n[c6c930]Witchblade\r\n[-] Melee S:User AP:0 D:D3 Sp?:*\r\n[c6c930]Fusion Pistol\r\n[-]6\" Pistol 1 S:8 AP:-4 D:D6 Sp?:*\r\n[dc61ed]Abilities[-]\r\nIshaâs Crystals\r\nRune Armour\r\nStrike and Fade:\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.99216634,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/786353562007695313/4779447C2AD8274D2D4F1DB51C014BA0B2C3D11B/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786353562007727367/BD46BB598DFB90145574D0D5B765A6BB7AF499E1/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function onLoad()\n  self.setVar(\"desc-id\", \"957d7483:c50a-0020-fb2a-2ef8\")\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "9f24cb"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 9.355669,
        "posY": 0.960000038,
        "posZ": 19.70828,
        "rotX": -7.33932453E-08,
        "rotY": 225.187454,
        "rotZ": -2.17027775E-07,
        "scaleX": 0.5000004,
        "scaleY": 0.5000004,
        "scaleZ": 0.5000004
      },
      "Nickname": "Ranger",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  3+  3+  3   3   1   1   7      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Shuriken pistol\r\n[-]12\" Pistol 1 S:4 AP:0 D:1 Sp?:*\r\n[c6c930]Ranger Long Rifle\r\n[-]36\" Heavy 1 S:4 AP:0 D:1 Sp?:*\r\n[dc61ed]Abilities[-]\r\nStrike and Fade:\r\nCameleoline Cloaks\r\nAppear Unbidden\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992167652,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://drive.google.com/uc?export=download&id=0B9NSWRINop7FMWZUNTdaV2pXVUk",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/910168656297224707/BFC42617E0542D73EC9D1C65C99BAF286A52A9B4/",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function onLoad()\n  self.setVar(\"desc-id\", \"957d7483:1b35-3aac-bfec-2626\")\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "6b65ec"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": -4.258492,
        "posY": 0.959693968,
        "posZ": 19.77785,
        "rotX": -8.613339E-07,
        "rotY": 315.011658,
        "rotZ": -6.824131E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Stalking Spider",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  3+  3+  3   3   1   1   7      4+\r\n[e85545]Weapons[-]\r\n[c6c930]Shuriken pistol\r\n[-]12\" Pistol 1 S:4 AP:0 D:1 Sp?:*\r\n[c6c930]Biting Blade\r\n[-] Melee S:+2 AP:-1 D:2 Sp?:-\r\n[dc61ed]Abilities[-]\r\nStrike and Fade:\r\nMasters of Stealth\r\nShadow Strike\r\nSustained Attack\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.99216634,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776222744414080767/38AB92AF7C6FE7C32B4EDCB80E4F95CB5F99EA98/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/776222744414083973/07DC3FC95A5193886D054BD5E2CC0DC46B150192/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function onLoad()\n  self.setVar(\"desc-id\", \"957d7483:6d46-3dd5-cf4d-af2d\")\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "d69d13"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": -5.468291,
        "posY": 0.958425045,
        "posZ": 19.40828,
        "rotX": 8.028149E-09,
        "rotY": 165.0085,
        "rotZ": 1.31065846E-07,
        "scaleX": 0.875,
        "scaleY": 0.875,
        "scaleZ": 0.875
      },
      "Nickname": "Raptor",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n10\"  4+   -  3   3   1   3   5      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Teeth and Talons\r\n[-] Melee S:User AP:0 D:1 Sp?:-\r\n[dc61ed]Abilities[-]\r\nBounding Leap\r\nPack Tactics\r\nWild Creature\r\nSustained Attack\r\nStrike and Fade:\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 0.996087968,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/937194242931010512/4593FA29CA4C53C9366FEB77F9814AE6FA2A8EE4/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/937194242930749717/0635E690264B5366878ADF876C11959113BD5186/",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function onLoad()\n  self.setVar(\"desc-id\", \"957d7483:7138-aa6f-74a6-8806\")\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "6cc6c0"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": -2.85675859,
        "posY": 0.9596938,
        "posZ": 19.9762878,
        "rotX": 3.28265651E-06,
        "rotY": 134.991486,
        "rotZ": -8.53035431E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Dragon Guard",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  3+  3+  3   3   1   1   7      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Lasblaster\r\n[-]24\" Assault 4 S:3 AP:0 D:1 Sp?:-\r\n[dc61ed]Abilities[-]\r\nDragon Master\r\nStrike and Fade:\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992167652,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/786353562011440750/6C686D1772934930AB1C3D56D746E0925658F021/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786353562011478908/2837157A84CE75C455E1283EAE8CFC85DDFB0843/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function onLoad()\n  self.setVar(\"desc-id\", \"957d7483:a952-7eac-b9f7-d5ad\")\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "84cb5c"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 6.32966471,
        "posY": 0.959694147,
        "posZ": 20.0996189,
        "rotX": -1.34286483E-06,
        "rotY": 44.98903,
        "rotZ": 1.51803079E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Glade Warrior",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  3+  3+  3   3   1   1   7      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Aeldari Blade\r\n[-] Melee S:User AP:0 D:1 Sp?:*\r\n[c6c930]Lasblaster\r\n[-]24\" Assault 4 S:3 AP:0 D:1 Sp?:-\r\n[dc61ed]Abilities[-]\r\nStrike and Fade:\r\nImplacable\r\nScattershield\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776222744414092877/0266D4567B4A4A85FBD171CF413BBEB3334A9B39/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786353138696369080/3CF65BEDF7F04A20E3B12E5276E8793906E4F014/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function onLoad()\n  self.setVar(\"desc-id\", \"957d7483:89ac-d94a-4ef8-e43d\")\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "a2112f"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 7.74104834,
        "posY": 0.959694147,
        "posZ": 20.0138836,
        "rotX": 5.00749775E-06,
        "rotY": 15.0178051,
        "rotZ": 1.37978816E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Honored Glade Guard",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n  7  3+  3+  3   3   1   2   7      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Laser Lance (melee)\r\n[-] Melee S:User AP:-4 D:2 Sp?:*\r\n[c6c930]Laser Lance (shooting)\r\n[-]6\" Assault 1 S:6 AP:-4 D:2 Sp?:-\r\n[dc61ed]Abilities[-]\r\nStrike and Fade:\r\nImplacable\r\nScattershield\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.9921668,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776222744414088890/14BDA984735916D4BE69BCD049E4CB3519541FB8/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/1458555028228070910/EDD02D048E3448410631EC805D1E1FFEE50A8C01/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function onLoad()\n  self.setVar(\"desc-id\", \"957d7483:89ac-d94a-4ef8-e43d\")\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "8b5f99"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 4.94481564,
        "posY": 0.959694,
        "posZ": 20.2473373,
        "rotX": 1.45452034E-07,
        "rotY": 30.1600056,
        "rotZ": -8.925766E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "2/2 Glade Warrior Leader",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  3+  3+  3   3   2   2   8      4+\r\n[dc61ed]Abilities[-]\r\nStrike and Fade:\r\nImplacable\r\nScattershield\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.9921668,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776222744414088890/14BDA984735916D4BE69BCD049E4CB3519541FB8/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786353138696405150/A8157A6B9F95837F8618151695C8889F6D241531/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function onLoad()\n  self.setVar(\"desc-id\", \"957d7483:89ac-d94a-4ef8-e43d\")\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "5cb13c"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 2.16362739,
        "posY": 0.9578005,
        "posZ": 20.3132248,
        "rotX": -7.84063047E-07,
        "rotY": 346.8825,
        "rotZ": -4.65979156E-06,
        "scaleX": 1.19999981,
        "scaleY": 1.19999981,
        "scaleZ": 1.19999981
      },
      "Nickname": "3/3 Amallyn Shadowguide",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  3+  2+  3   3   3   2   7      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Ranger Long Rifle\r\n[-]36\" Heavy 1 S:4 AP:0 D:1 Sp?:*\r\n[c6c930]Plasma Grenade\r\n[-]6\" Grenade D6 S:4 AP:-1 D:1 Sp?:*\r\n[c6c930]Power blade\r\n[-] Melee S:User AP:-2 D:1 Sp?:-\r\n[dc61ed]Abilities[-]\r\nPhase Crystal\r\nAmallyn Shadowguide\r\nAppear Unbidden\r\nCameleoline Cloak\r\nBattle Focus\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.847058833,
        "g": 0.847058833,
        "b": 0.847058833
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": false,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/940588433501085478/E21884BCEA188D4AAA5E124EEF1D4B7C3116E5E6/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/940588433501085045/FFBE9426AE8662C65C826AB3233DD0C3B3F14F35/",
        "NormalURL": "",
        "ColliderURL": "http://pastebin.com/raw.php?i=ahfaXzUd",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Amallyn Shadowguide\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 55pts 3 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Faction: Aeldari, Faction: Warhost, Faction: Biel-Tan, Character, Infantry, Ranger, Faction: Exodites, HQ\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"420\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"122 577\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Amallyn Shadowguide\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"140\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Appear Unbidden\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"During deployment, you can set up Amallyn Shadowguide walking the winding paths of the webway instead of placing it on the battlefield. At the end of one of your Movement phases, this\\nunit can emerge from the webway â set this unit up anywhere on the battlefield that is more than 9\\u{201D} away from any enemy models.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cameleoline Cloak\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Your opponent must subtract 1 from their hit rolls for ranged weapons that target Amallyn Shadowguide. In addition, if Amallyn Shadowguide is receiving the benefit of cover, add 2 to her saving throws instead of 1.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Phase Crystal\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Amallyn Shadowguide has a 4+ invulnerable save and can move across models and terrain as if they were not there.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"104 66 66 66 66 66 66 66 66 66\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Amallyn Shadowguide\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"280\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"71 50 50 50 50 50 377\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Plasma Grenade\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Grenade D6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Blast\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Power blade\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ranger Long Rifle\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"36\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Heavy 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This weapon may target a CHARACTER even if it is not the closest enemy unit. Each time you roll a wound roll of 6+ for this weapon, it inflicts a mortal wound in addition to any other damage.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:287e-64e4-3106-9ae4\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "61c7e6"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": -1.80967677,
        "posY": 1.106677,
        "posZ": 25.78982,
        "rotX": 0.0249060187,
        "rotY": 329.989258,
        "rotZ": 1.4994365,
        "scaleX": 0.9250001,
        "scaleY": 0.9250001,
        "scaleZ": 0.9250001
      },
      "Nickname": "12/12 Dragon King. Upon Drake",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n  *   *  2+  6   7  12   *   9      3+\r\n[e85545]Weapons[-]\r\n[c6c930]Singing Spear (melee)\r\n[-] Melee S:User AP:0 D:D3 Sp?:*\r\n[c6c930]Drake Flame Breath\r\n[-]18\" Assault D6 S:6 AP:-2 D:2 Sp?:*\r\n[c6c930]Shuriken pistol\r\n[-]12\" Pistol 1 S:4 AP:0 D:1 Sp?:*\r\n[c6c930]Singing Spear (shooting)\r\n[-]12\" Assault 1 S:9 AP:0 D:D3 Sp?:*\r\n[c6c930]Drake Claws\r\n[-] Melee S:User AP:-1 D:3 Sp?:*\r\n[dc61ed]Abilities[-]\r\nAdvance of the Dragon\r\nThe Dragon King\r\nInspiring Leader\r\nMastercrafted Armour\r\nStrike and Fade:\r\nDeath Throws\r\nDraconic Resilience\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776222744414068678/D703D942DCD6093B6B2677C285392D49CDC217AC/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/776222744414073556/CCE794F4116974A078E3866A95CAB98C272B7147/",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Dragon King. Upon Drake\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 235pts 13 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Character, Dragon, Faction: Dragon Riders, Faction: Exodites, HQ, Monster, Fly, Dragon King, Upon Drake\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"600\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"132 567\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Advance of the Dragon\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When this unit advances, add 6â to its move characteristic for that movement phase instead of rolling dice.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Death Throws\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If this model is reduced to 0 wounds, roll a dice before removing the model from the battlefield, on a 6 it lashes out in its death throes, and each unit within 3â suffers D3 mortal wounds\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Draconic Resilience\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Roll a D6 each time the Dragon King loses a wound, on a roll on 5+ that wound is not lost.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Inspiring Leader\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"DRAGON RIDER units can re-roll hit rolls of 1, if they are within 12â of the Dragon King\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-4\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Mastercrafted Armour\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This unit has a 4+ invulnerable save\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-5\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-6\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"The Dragon King\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"You do not need to take morale tests for friendly DRAGON RIDER units within 6â of Dragon King\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"122 64 64 64 64 64 64 64 64 64\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Dragon King. Upon Drake\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"*\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"*\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"12\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"*\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"9\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"440\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"96 48 48 48 48 48 362\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Drake Claws\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When attacking models that can FLY, you may add 1 to this weaponâs hit roll. After a model on this mount makes its close combat attacks, you can attack with its mount. Make 2 additional attacks, using this weapon profile\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Drake Flame Breath\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"18\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Assault D6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This weapon automatically hits its target\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Shuriken pistol\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"12\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Pistol 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Each time you make a wound roll of 6+ for this weapon, that hit is resolved with an AP of -3 instead of 0.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Singing Spear (melee)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This weapon always wounds on a roll of 2+.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-4\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Singing Spear (shooting)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"12\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Assault 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"9\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This weapon always wounds on a roll of 2+.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-5\"\n                  , preferredHeight = \"280\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"205 98 131 131 131\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-5-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Wound Track\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Remaining W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Characteristic 1\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Characteristic 2\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Characteristic 3\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-5-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Dragon King. Upon Drake.1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7-12\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"30\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-5-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Dragon King. Upon Drake.2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4-6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"20\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-5-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Dragon King. Upon Drake.3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1-3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"10\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:01c5-ec3f-0508-1866\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "ca6c58"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 3.43892956,
        "posY": 0.953896,
        "posZ": 20.0253429,
        "rotX": -1.513598E-06,
        "rotY": 270.362061,
        "rotZ": 6.201542E-07,
        "scaleX": 1.74999952,
        "scaleY": 1.74999952,
        "scaleZ": 1.74999952
      },
      "Nickname": "5/5 Illic Nightspear",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  2+  2+  3   3   5   4   9      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Shuriken pistol\r\n[-]12\" Pistol 1 S:4 AP:0 D:1 Sp?:*\r\n[c6c930]Power sword\r\n[-] Melee S:User AP:-3 D:1 Sp?:-\r\n[c6c930]Voidbringer\r\n[-]48\" Heavy 1 S:4 AP:-3 D:3 Sp?:*\r\n[dc61ed]Abilities[-]\r\nAncient Doom\r\nBattle Focus\r\nAppear Unbidden\r\nBringer of the True Death\r\nHunter Unseen\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/912417222211303704/D1B180232A01AA6CADCD471BADA3D32982B291D2/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/912417222211303825/A8D4D44A9A24545C99E30B9FEAA0079F89D38BA6/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211303907/E4A3D624105F03E8F2F31AEDBA602F4C8D1E62F1/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Illic Nightspear\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 70pts 4 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Faction: Aeldari, Faction: Asuryani, Faction: Warhost, Infantry, Character, Illic Nightspear, Faction: Alaitoc, Ranger, Faction: Aeldari, Faction: Alaitoc, Faction: Asuryani, Character, HQ, Illic Nightspear, Infantry, Faction: Warhost\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"460\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"152 547\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ancient Doom\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"You can re-roll failed hit rolls in the Fight phase for this unit in a turn in which it charges or is charged by a SLAANESH unit. However, you must add 1 to Morale tests for this unit if it is within 3\\u{201D} of any SLAANESH units.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"100\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Appear Unbidden\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"During deployment, you can set up Illic Nightspear walking the winding paths of the webway instead of placing him on the battlefield. At the end of one of your Movement phases, this unit can emerge from the webway â set this unit up anywhere on the battlefield that is more than 9\\u{201D} away from any enemy models.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Battle Focus\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If this unit moves or Advances in its Movement phase, weapons (excluding Heavy weapons) are used as if the unit had remained stationary.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Bringer of the True Death\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"You can re-roll hit and wound rolls of 1 for Illic Nightspear's attacks when they target a NECRON unit.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-4\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Hunter Unseen\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Each time a ranged attack is allocated to this model while it is receiving the benefits of cover, add an additional 1 to any armour saving throw made against that attack.â\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"90 67 67 67 67 67 67 67 67 67\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Illic Nightspear\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"9\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"300\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"63 50 50 50 50 50 381\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Power sword\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Shuriken pistol\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"12\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Pistol 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Each time you make a wound roll of 6+ for this weapon, that hit is resolved with an AP of -3 instead of 0.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"100\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Voidbringer\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"48\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Heavy 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Each time you select a target for this weapon, you can ignore the Look Out, Sir rule. This weapon wounds on a 2+, unless it is targeting a VEHICLE. Each time you roll a wound roll of 6+ for this weapon, it inflicts a mortal wound in addition to any other damage.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:58de-6fb9-9ab6-df79\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "0f7635"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 10000.0,
        "posY": 10001.1152,
        "posZ": 10000.0,
        "rotX": 1.72638261,
        "rotY": 30.3816853,
        "rotZ": 1.01269114,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "2/2 Dragon Knight",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n14\"  3+  3+  4   4   2   2   8      3+\r\n[e85545]Weapons[-]\r\n[c6c930]Laser Lance (melee)\r\n[-] Melee S:User AP:-4 D:2 Sp?:*\r\n[c6c930]Laser Lance (shooting)\r\n[-]6\" Assault 1 S:6 AP:-4 D:2 Sp?:-\r\n[c6c930]Crushing Teeth And Claws\r\n[-] Melee S:5 AP:-1 D:1 Sp?:*\r\n[dc61ed]Abilities[-]\r\nStrike and Fade:\r\nAdvance of the Dragon\r\nKnights Courage\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992165864,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776222744414061673/55CE9F0417B1D283CC7A0138409F47B76076F241/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/910170418286554727/EC0363D5E57828F8122CD47BD2BB22A9D64AFE3F/",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Dragon Knights\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 100pts 6 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Cavalry, Dragon Knights, Faction: Dragon Riders, Faction: Exodites, Fast Attack, Dragon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"132 567\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Advance of the Dragon\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When this unit advances, add 6â to its move characteristic for that movement phase instead of rolling dice.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Expert Hunter\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"You can re-roll wound rolls for a Dragon Knight Leader when attacking MONSTERS or VEHICLE.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Knights Courage\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Models in this unit have a 4+ invulnerable save against ranged weapons.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"200\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"109 65 65 65 65 65 65 65 65 65\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Dragon Knight\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"14\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Dragon Knight Leader\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"14\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"280\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"96 48 48 48 48 48 362\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Crushing Teeth And Claws\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"After a model on this mount makes its close combat attacks, you can attack with its mount. Make 2 additional attacks, using this weapon profile\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Laser Lance (melee)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If the bearer charged this turn, attacks with this weapon are made at Strength 6.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Laser Lance (shooting)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Assault 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:5c89-263e-7c37-1564\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "e3fa08"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 10000.0,
        "posY": 10001.3271,
        "posZ": 10000.0,
        "rotX": 1.886499E-06,
        "rotY": 359.991821,
        "rotZ": 2.2666768E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Son Of Kurnous",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n                                      \r\n[e85545]Weapons[-]\r\n[c6c930]Kurnous Shard\r\n[-] Melee S:+2 AP:-3 D:3 Sp?:-\r\n[dc61ed]Abilities[-]\r\nFor Isha\r\nAcrobatic\r\nTrue Believer\r\nIshaâs Crystals\r\nStrike and Fade:\r\nMatchless Agility\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992167056,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/786352830164535087/A7E016CE127D4CF3F5F3C08CD082CE709CBFC25F/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786352830164536009/9A0AB802C925B9D646963BE88C64D8D5B418DF84/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Sons Of Kurnous\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 110pts 4 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Elites, Faction: Exodites, Infantry, Sons Of Kurnous\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"520\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"111 588\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Acrobatic\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This unit can Advance and charge in the same turn. In a turn in which it Advanced, you can declare a charge move for this unit if there are any enemy units within 15â of it, and you can add 3 to the resulting charge roll.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"For Isha\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If this unit slays an enemy unit, it may take its full movement at the end of its combat phase.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ishaâs Crystals\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Instead of moving in their movement phase. This unit may place a Spirit Crystal within 3â of this unit on the battlefield. No more than 3 Spirit Crystals may be on the battlefield at once\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Matchless Agility\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units targeting this unit in the shooting phase must subtract 1 from their hit rolls.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-4\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-5\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"True Believer\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Enemy units can not fire overwatch at this unit.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"107 98 98 98 98 98 98\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Kurnous Shard\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"+2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:2e84-830a-03ed-16e2\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "2f66c8"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 10000.0,
        "posY": 10001.95,
        "posZ": 10000.0,
        "rotX": 90.0,
        "rotY": 229.314423,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Child Of Isha",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  3+  3+  3   3   1   1   8      6+\r\n[e85545]Weapons[-]\r\n[c6c930]Witchblade\r\n[-] Melee S:User AP:0 D:D3 Sp?:*\r\n[c6c930]Fusion Pistol\r\n[-]6\" Pistol 1 S:8 AP:-4 D:D6 Sp?:*\r\n[dc61ed]Abilities[-]\r\nIshaâs Crystals\r\nRune Armour\r\nStrike and Fade:\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.99216634,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/786353562007695313/4779447C2AD8274D2D4F1DB51C014BA0B2C3D11B/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786353562007727367/BD46BB598DFB90145574D0D5B765A6BB7AF499E1/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Children Of Isha\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 225pts 10 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Children Of Isha, Elites, Faction: Exodites, Infantry, Psyker\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"280\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"111 588\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ishaâs Crystals\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Instead of moving in their movement phase. This unit may place a Spirit Crystal within 3â of this unit on the battlefield. No more than 3 Spirit Crystals may be on the battlefield at once\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Rune Armour\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This model has a 4+ invulnerable save.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"460\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"134 59 59 446\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Psychic Power\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Warp Charge\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Details\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ishaâs love\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"9\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" If manifested, choose a model in the unit manifesting the power, all friendly units within 9â of that model, gains an invulnerable save of 5+ until your next psychic phase\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Nature Protects\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"9\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"12\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If manifested, Target friendly unit within 12â of the Psyker, canât be targeted by ranged weapons, until the psyker's next psychic phase.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"160\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Smite/Destructor (Conclave)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"9\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When this unit manifests the Smite psychic power, it has a range of 9\\u{201D} rather than 18\\u{201D}. In addition, if this unit consists of 1-3 models when it manifests Smite, it only does a single mortal wound.  If it consists of 4-6 models when it manifests Smite, it deals D3 mortal wounds. If the result of the psychic test was more than 10, the target suffers D6 mortal wounds instead. If it consists of 7-10 models when it manifests Smite, it always deals D6 mortal wounds.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"100\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Spirit Crystals\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unlimited\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If manifested it creates a Spirit Crystal anywhere on the battlefield that canât be placed within 9â of an enemy unit. No more than 3 Spirit Crystals may be on the battlefield at once. See Spirit Crystal unit description for its details and abilities.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"340\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"67 53 53 121 403\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Psyker\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cast\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Deny\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Powers Known\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Other\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"140\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Conclave (1-3)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2 powers from Runes of Isha\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If this unit has more than one model, when manifesting or denying a psychic power, first select a model in the unit - measure range, visibility, etc. from this model. If this unit suffers Perils of the Warp, it suffers D3 mortal wounds as described in the core rules, but units within 6\\u{201D} will only suffer damage if the Perils of the Warp causes the last model in the manifesting unit to be slain.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Conclave (4-6)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2 powers from Runes of Isha\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Conclave (7-10)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2 powers from Runes of Isha\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-5\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"75 69 69 69 69 69 69 69 69 69\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-5-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-5-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Child Of Isha\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-6\"\n                  , preferredHeight = \"200\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"55 51 51 51 51 51 386\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-6-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-6-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Fusion Pistol\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Pistol 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If the target is within half range of this weapon, roll two dice when inflicting damage with it and discard the lowest result.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-6-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Witchblade\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This weapon always wounds on a roll of 2+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:c50a-0020-fb2a-2ef8\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "e5fd0b"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 10000.0,
        "posY": 10002.2432,
        "posZ": 10000.0,
        "rotX": 7.202562E-05,
        "rotY": 15.0645628,
        "rotZ": 0.00103300635,
        "scaleX": 0.5000004,
        "scaleY": 0.5000004,
        "scaleZ": 0.5000004
      },
      "Nickname": "Ranger",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  3+  3+  3   3   1   1   7      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Shuriken pistol\r\n[-]12\" Pistol 1 S:4 AP:0 D:1 Sp?:*\r\n[c6c930]Ranger Long Rifle\r\n[-]36\" Heavy 1 S:4 AP:0 D:1 Sp?:*\r\n[dc61ed]Abilities[-]\r\nStrike and Fade:\r\nCameleoline Cloaks\r\nAppear Unbidden\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992167652,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://drive.google.com/uc?export=download&id=0B9NSWRINop7FMWZUNTdaV2pXVUk",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/910168656297224707/BFC42617E0542D73EC9D1C65C99BAF286A52A9B4/",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Rangers\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 75pts 3 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Faction: <Craftworld>, Faction: Aeldari, Faction: Asuryani, Infantry, Rangers, Troops, Faction: Warhost\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"300\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"116 583\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"100\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Appear Unbidden\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"During deployment, you can set up this unit walking the winding paths of the webway instead of placing it on the battlefield. At the end of any of your Movement phases, this unit can emerge from the webway â set this unit up anywhere on the battlefield that is more than 9\\u{201D} away from any enemy models.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cameleoline Cloaks\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Each time a ranged attack is allocated to a model in this unit while it is receiving the benefits of cover, add an additional 1 to any armour saving throw made against that attack.â\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"70 70 70 70 70 70 70 70 70 70\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ranger\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"200\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"71 50 50 50 50 50 377\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ranger Long Rifle\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"36\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Heavy 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This weapon may target a CHARACTER even if it is not the closest enemy unit. Each time you roll a wound roll of 6+ for this weapon, it inflicts a mortal wound in addition to any other damage.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Shuriken pistol\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"12\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Pistol 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Each time you make a wound roll of 6+ for this weapon, that hit is resolved with an AP of -3 instead of 0.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:1b35-3aac-bfec-2626\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "20a8b6"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 10000.0,
        "posY": 10002.43,
        "posZ": 10000.0,
        "rotX": 357.044464,
        "rotY": 180.406219,
        "rotZ": 359.980255,
        "scaleX": 0.875,
        "scaleY": 0.875,
        "scaleZ": 0.875
      },
      "Nickname": "Raptor",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n10\"  4+   -  3   3   1   3   5      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Teeth and Talons\r\n[-] Melee S:User AP:0 D:1 Sp?:-\r\n[dc61ed]Abilities[-]\r\nBounding Leap\r\nPack Tactics\r\nSustained Attack\r\nWild Creature\r\nStrike and Fade:\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 0.996087968,
        "b": 1.0
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/937194242931010512/4593FA29CA4C53C9366FEB77F9814AE6FA2A8EE4/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/937194242930749717/0635E690264B5366878ADF876C11959113BD5186/",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Dragon Guard\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 50pts 4 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Dragon, Beast, Dragon Guard, Faction: Exodites, Infantry, Troops\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"580\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"105 594\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Bounding Leap\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Whenever this unit piles in and consolidates, it can move up to 6\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Dragon Master\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Re-roll hits of 1 for friendly DRAGON units whilst they are within 6â of this model. Friendly DRAGON units can use this modelâs leadership characteristic instead of their own whilst they are within 6â of it.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Pack Tactics\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If this unit contains 20 or more models, you can re-roll wound rolls of 1 when it fights\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-4\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Sustained Attack\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" Each time you roll a hit roll of 6+ when making a close combat attack, that model can immediately \\nmake another close combat attack using the same weapon, these extra attacks cannot generate any additional attacks.\\n\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-5\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"100\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Wild Creature\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" If there is no <Draâarch> or <Dragon Guard> within 6â of this unit at the start of your charging or fighting phase roll a D6 on a 1,2 and 3 this unit will flee towards the closest map edge, on a 4,5 and 6 this unit will attack the closest other unit friendly or enemy unit.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"200\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"70 70 70 70 70 70 70 70 70 70\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Dragon Guard\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Raptor\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"10\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"200\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"127 95 95 95 95 95 95\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Lasblaster\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"24\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Assault 4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Teeth and Talons\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:a952-7eac-b9f7-d5ad\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "e88a8c"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 10000.0,
        "posY": 10002.6152,
        "posZ": 10000.0,
        "rotX": 9.427994E-06,
        "rotY": 299.676636,
        "rotZ": 9.761949E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Stalking Spider",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  3+  3+  3   3   1   1   7      4+\r\n[e85545]Weapons[-]\r\n[c6c930]Shuriken pistol\r\n[-]12\" Pistol 1 S:4 AP:0 D:1 Sp?:*\r\n[c6c930]Biting Blade\r\n[-] Melee S:+2 AP:-1 D:2 Sp?:-\r\n[dc61ed]Abilities[-]\r\nStrike and Fade:\r\nMasters of Stealth\r\nShadow Strike\r\nSustained Attack\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.99216634,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776222744414080767/38AB92AF7C6FE7C32B4EDCB80E4F95CB5F99EA98/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/776222744414083973/07DC3FC95A5193886D054BD5E2CC0DC46B150192/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Stalking Spiders\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 65pts 3 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Faction: Exodites, Infantry, Stalking Spiders , Troops\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"380\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"116 583\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"100\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Masters of Stealth\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"During deployment, you can set up this unit in the shadows instead of placing it on the battlefield. At the end of any of your Movement phases this unit can stalk from their hiding place - set it up anywhere on the battlefield that is more than 9\\u{201D} away from enemy models.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Shadow Strike\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Add 1 to hit rolls for attacks for this unit that target a unit in cover.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Sustained Attack\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" Each time you roll a hit roll of 6+ when making a close combat attack, that model can immediately make another close combat attack using the same weapon, these extra attacks cannot generate any additional attacks.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"90 67 67 67 67 67 67 67 67 67\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Stalking Spiders\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"200\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"63 50 50 50 50 50 381\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Biting Blade\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"+2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Shuriken pistol\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"12\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Pistol 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Each time you make a wound roll of 6+ for this weapon, that hit is resolved with an AP of -3 instead of 0.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:6d46-3dd5-cf4d-af2d\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "f74dc6"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 10000.0,
        "posY": 10002.8252,
        "posZ": 10000.0,
        "rotX": 1.16222566E-06,
        "rotY": 194.9883,
        "rotZ": 1.318697E-06,
        "scaleX": 0.875,
        "scaleY": 0.875,
        "scaleZ": 0.875
      },
      "Nickname": "Raptor",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n10\"  4+   -  3   3   1   3   5      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Teeth and Talons\r\n[-] Melee S:User AP:0 D:1 Sp?:-\r\n[dc61ed]Abilities[-]\r\nBounding Leap\r\nPack Tactics\r\nWild Creature\r\nSustained Attack\r\nStrike and Fade:\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 0.996087968,
        "b": 1.0
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/937194242931010512/4593FA29CA4C53C9366FEB77F9814AE6FA2A8EE4/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/937194242930749717/0635E690264B5366878ADF876C11959113BD5186/",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Raptor Pack\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 50pts 4 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Beast, Faction: Exodites, Fast Attack, Infantry, Raptor Pack, Dragon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"500\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"105 594\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Bounding Leap\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Whenever this unit piles in and consolidates, it can move up to 6\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Pack Tactics\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If this unit contains 20 or more models, you can re-roll wound rolls of 1 when it fights\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Sustained Attack\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" Each time you roll a hit roll of 6+ when making a close combat attack, that model can immediately \\nmake another close combat attack using the same weapon, these extra attacks cannot generate any additional attacks.\\n\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-4\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"100\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Wild Creature\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" If there is no <Draâarch> or <Dragon Guard> within 6â of this unit at the start of your charging or fighting phase roll a D6 on a 1,2 and 3 this unit will flee towards the closest map edge, on a 4,5 and 6 this unit will attack the closest other unit friendly or enemy unit.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"70 70 70 70 70 70 70 70 70 70\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Raptor\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"10\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"127 95 95 95 95 95 95\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Teeth and Talons\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:7138-aa6f-74a6-8806\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "398176"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 10000.0,
        "posY": 10003.0107,
        "posZ": 10000.0,
        "rotX": 0.000131085457,
        "rotY": 105.015923,
        "rotZ": 0.000132777132,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Glade Warrior",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n 7\"  3+  3+  3   3   1   1   7      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Aeldari Blade\r\n[-] Melee S:User AP:0 D:1 Sp?:*\r\n[c6c930]Lasblaster\r\n[-]24\" Assault 4 S:3 AP:0 D:1 Sp?:-\r\n[dc61ed]Abilities[-]\r\nStrike and Fade:\r\nImplacable\r\nScattershield\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776222744414092877/0266D4567B4A4A85FBD171CF413BBEB3334A9B39/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786353138696369080/3CF65BEDF7F04A20E3B12E5276E8793906E4F014/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Glade Warriors\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 72pts 3 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Faction: Exodites, Glade Warriors, Infantry, Specialist Detachment, Stratagems, Troops\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"280\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"105 594\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Implacable\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This unit can Fall Back and still shoot in a turn it does so\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Scattershield\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A model equipped with a scattershield has a 5+ invulnerable save.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"280\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"109 65 65 65 65 65 65 65 65 65\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Glade Warrior\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Glade Warrior Leader\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Honored Glade Guard\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"94 51 51 51 51 51 347\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Aeldari Blade\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"You can re-roll failed hit rolls for this weapon.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Lasblaster\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"24\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Assault 4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Laser Lance (melee)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If the bearer charged this turn, attacks with this weapon are made at Strength 6.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Laser Lance (shooting)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Assault 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:89ac-d94a-4ef8-e43d\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "6d97ad"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 10000.0,
        "posY": 10004.52,
        "posZ": 10000.0,
        "rotX": 6.12611939E-06,
        "rotY": 164.999969,
        "rotZ": -1.02505453E-06,
        "scaleX": 1.24999988,
        "scaleY": 1.24999988,
        "scaleZ": 1.24999988
      },
      "Nickname": "Pterosaur Rider",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n14\"  3+  3+  3   3   1   2   6      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Laser Lance (melee)\r\n[-] Melee S:User AP:-4 D:2 Sp?:*\r\n[c6c930]Laser Lance (shooting)\r\n[-]6\" Assault 1 S:6 AP:-4 D:2 Sp?:-\r\n[c6c930]Beak And Talons\r\n[-] Melee S:4 AP:0 D:1 Sp?:*\r\n[c6c930]Plasma Grenade\r\n[-]6\" Grenade D6 S:4 AP:-1 D:1 Sp?:*\r\n[dc61ed]Abilities[-]\r\nWinged Strike\r\nDive Attack\r\nBombs\r\nStrike and Fade:\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992167652,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1613934103784169757/00E480B4587E02D89169D86FC694BBDAB9F31150/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/1613934103784164256/7CE30861AE4AA480FBB200B41C1C8A94F61D2956/",
        "NormalURL": "",
        "ColliderURL": "http://pastebin.com/raw.php?i=KAeNs1LY",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Pterosaur Riders\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 70pts 3 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Dragon, Faction: Dragon Riders, Faction: Exodites, Fast Attack, Fly, Pterosaur Riders, Cavalry\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"380\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"105 594\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Bombs\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"This unit may make a single attack against any unit it moved over at the end of the movement phase. Using its plasma grenades.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Dive Attack\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" Add 2 to the attack characteristic of models in this unit in a turn in which it charges, 1 attack is made by the rider and 1 by the Pterosaur.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"100\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Winged Strike\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" During deployment, you can set up this unit flying high in the skies instead of placing it on the battlefield. At the end of any of your movement phases the Pterosaur Riders can use a winged strike to arrive - set them up anywhere on the battlefield that is more than 9â away from any enemy models.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"90 67 67 67 67 67 67 67 67 67\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Pterosaur Riders\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"14\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"89 48 48 48 48 48 366\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Beak And Talons\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"After a model on this mount makes its close combat attacks, you can attack with its mount. Make 1 additional attacks, using this weapon profile\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Laser Lance (melee)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If the bearer charged this turn, attacks with this weapon are made at Strength 6.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Laser Lance (shooting)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Assault 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Plasma Grenade\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Grenade D6\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Blast\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:ff9c-fc4b-2094-70fc\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "8e1dbb"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 12.3476686,
        "posY": 0.95977056,
        "posZ": 24.110424,
        "rotX": 2.22302515E-06,
        "rotY": 209.99292,
        "rotZ": -3.01613318E-06,
        "scaleX": 0.750000238,
        "scaleY": 0.750000238,
        "scaleZ": 0.750000238
      },
      "Nickname": "4/4 Tricer",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n10\"   3   -  5   5   4   4   5      5+\r\n[e85545]Weapons[-]\r\n[c6c930]Three Horned Attack\r\n[-] Melee S:User AP:-2 D:1 Sp?:-\r\n[dc61ed]Abilities[-]\r\nAdvance of the Dragon\r\nDevastating Charge\r\nThrill Of The Fight\r\nWild Creature\r\nStrike and Fade:\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/786353847608907493/376ABDA538AC093DC39C1019D5EBAE4C499BA351/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786352830164058782/B34C4F422216FBEF83742F984A6B170B3986590F/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"Tricer Herd\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 141pts 8 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Beast, Dragon, Elites, Faction: Exodites, Tricer Herd\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"460\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"132 567\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Advance of the Dragon\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When this unit advances, add 6â to its move characteristic for that movement phase instead of rolling dice.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Devastating Charge\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" Add 2 to the strength of this unit's melee attack, if the unit charged in the same turn\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Thrill Of The Fight\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When this unit deals 3 unsaved wounds to an enemy unit in close combat, it gains a 4+ invulnerable save until the start of its owners next turn.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-4\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"100\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Wild Creature\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" If there is no <Draâarch> or <Dragon Guard> within 6â of this unit at the start of your charging or fighting phase roll a D6 on a 1,2 and 3 this unit will flee towards the closest map edge, on a 4,5 and 6 this unit will attack the closest other unit friendly or enemy unit.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"70 70 70 70 70 70 70 70 70 70\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Tricer\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"10\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"146 92 92 92 92 92 92\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Three Horned Attack\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"957d7483:1eb1-d1d1-4087-5c87\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "4ab3d9"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 0.808215261,
        "posY": 0.9650232,
        "posZ": 23.63447,
        "rotX": -4.53010762E-06,
        "rotY": 269.982574,
        "rotZ": 1.219958E-05,
        "scaleX": 0.35000056,
        "scaleY": 0.35000056,
        "scaleZ": 0.35000056
      },
      "Nickname": "Messenger of Isha 9/9",
      "Description": "M10 WS3+ BS3+ S6 T6 W9 A3 LD9 SV3+ \n\r\nThe Tearful Kiss Melee S-User AP-2 D3 (When this weapon deals damage to an enemy, that damage heals one model within 6” of this model for the same amount)\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992162049,
        "b": 0.9999998
      },
      "Locked": false,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1613934103783787628/A160A488AC87FF4CAF8528D82D24649AFC1D3279/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/1613934103783768500/6E317F1E94FCA714CE50EB34511F4F9A2322B1D7/",
        "NormalURL": "",
        "ColliderURL": "http://pastebin.com/raw.php?i=KAeNs1LY",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "4a418a"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": -15.8094826,
        "posY": 0.9596939,
        "posZ": 20.9765968,
        "rotX": 9.750388E-07,
        "rotY": 134.99324,
        "rotZ": 6.787564E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "7/7 War Leader",
      "Description": "[56f442]M  WS BS  S   T  W   A  LD     SV[-][-]\r\n10\"  3+  3+  5   5   7   2   9      4+\r\n[e85545]Weapons[-]\r\n[c6c930]Three Horned Attack (War Leader)\r\n[-] Melee S:User AP:-2 D:1 Sp?:*\r\n[c6c930]Shuriken pistol\r\n[-]12\" Pistol 1 S:4 AP:0 D:1 Sp?:*\r\n[c6c930]Star Lance (shooting)\r\n[-]6\" Assault 1 S:8 AP:-4 D:2 Sp?:-\r\n[c6c930]Star Lance (melee)\r\n[-] Melee S:User AP:-4 D:2 Sp?:*\r\n[dc61ed]Abilities[-]\r\nIshaâs Crystals\r\nStand Defiant\r\nStrike\r\nAdvance of the Dragon\r\nDevastating Charge\r\nStrike and Fade:\r\nThrill Of The Fight\r\nTactical Genius\r\n2. Master Tamer\r\n",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/1644336516809133488/DEB02D0BD1749EC0159DF43E1AB187C7FACBF9A5/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/1644336516809135571/447F29A588CD1268DB117EC02832A671B6E6FA43/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/912417222211304390/4E16E9DCB532FA4335B74AD65641CF818883F51D/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "function uiSub(uiTable, target, value)\n  if uiTable[\"attributes\"] then\n    for k,v in pairs(uiTable[\"attributes\"]) do\n      uiTable[\"attributes\"][k] = nil\n      uiTable[\"attributes\"][string.gsub(k, target, value)] = string.gsub(v, target, value)\n    end\n  end\n  if uiTable[\"children\"] then\n    for k,child in pairs(uiTable[\"children\"]) do\n      uiTable[\"children\"][k] = uiSub(child, target, value)\n    end\n  end\n  return uiTable\nend\n\nfunction createUI(uiId, playerColor)\n  local guid = self.getGUID()\n  local uiTable = uiSub(\n                  uiSub(\n                  uiSub({tag = \"Panel\", attributes = { id = \"thepanelid\"\n                  , visibility = \"thevisibility\"\n                  , active = \"false\"\n                  , width = \"700\"\n                  , height = \"450\"\n                  , returnToOriginalPositionWhenReleased = \"false\"\n                  , allowDragging = \"true\"\n                  , color = \"#FFFFFF\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"true\"\n                  , width = \"700\"\n                  , childForceExpandWidth = \"false\"\n                  , childForceExpandHeight = \"false\" }, children = { {tag = \"Row\", attributes = { preferredHeight = \"30\" }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMinSize = \"6\"\n                  , resizeTextMaxSize = \"30\"\n                  , fontSize = \"25\"\n                  , rectAlignment = \"MiddleCenter\"\n                  , text = \"War Leader\"\n                  , width = \"700\" }, children = {  }}\n                  , {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , height = \"30\"\n                  , width = \"30\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-close\"\n                  , class = \"topButtons\"\n                  , color = \"#990000\"\n                  , textColor = \"#FFFFFF\"\n                  , text = \"X\"\n                  , height = \"30\"\n                  , width = \"30\"\n                  , onClick = \"theguid/closeUI\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-scrollRow\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"VerticalScrollView\", attributes = { id = \"theguid-scrollView\"\n                  , scrollSensitivity = \"30\"\n                  , height = \"360\"\n                  , width = \"700\" }, children = { {tag = \"TableLayout\", attributes = { padding = \"10\"\n                  , cellPadding = \"5\"\n                  , horizontalOverflow = \"Wrap\"\n                  , columnWidths = \"700\"\n                  , autoCalculateHeight = \"true\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-rowtab-0\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-0-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Cost: 145pts 7 PL\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"700\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-1-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Keywords: Warlord, Beast, Cavalry, Character, Dragon, Faction: Exodites, Faction: Dragon Riders, HQ, War Leader\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-2\"\n                  , preferredHeight = \"760\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"132 567\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-2-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Description\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2. Master Tamer\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If your warlord has the DRAGON RIDER keyword. Add 1 wound and 1 attack to both those characteristics.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Advance of the Dragon\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When this unit advances, add 6â to its move characteristic for that movement phase instead of rolling dice.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Devastating Charge\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \" Add 2 to the strength of this unit's melee attack, if the unit charged in the same turn\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ishaâs Crystals\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Instead of moving in their movement phase. This unit may place a Spirit Crystal within 3â of this unit on the battlefield. No more than 3 Spirit Crystals may be on the battlefield at once\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-4\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Stand Defiant\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If any friendly INFANTRY units within 6â are in combat, and are outnumbered in models in that combat, they may make an extra attack this turn.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-5\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"You can re-roll wound rolls of 1 for friendly DRAGON RIDER units that are within 6â of this model\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-6\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Strike and Fade:\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Units with this attribute can Charge during a turn in which they Fell Back. When a model with this attribute that is not within 3\\u{201D} of any enemy units makes a consolidation move, it does not have to end that move closer to the nearest enemy model.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-7\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Tactical Genius\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If your army is Battle-forged, you receive an additional 2 command points if War Leader is your Warlord\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-2-row-8\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Thrill Of The Fight\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"When this unit deals 3 unsaved wounds to an enemy unit in close combat, it gains a 4+ invulnerable save until the start of its owners next turn.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-3\"\n                  , preferredHeight = \"120\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"70 70 70 70 70 70 70 70 70 70\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-3-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Unit\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"M\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"WS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"BS\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"T\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"W\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"A\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Ld\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Save\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-3-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"War Leader\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"10\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"3+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"5\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"7\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"9\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4+\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-rowtab-4\"\n                  , preferredHeight = \"360\" }, children = { {tag = \"TableLayout\", attributes = { autoCalculateHeight = \"false\"\n                  , cellPadding = \"5\"\n                  , columnWidths = \"123 46 46 46 46 46 346\" }, children = { {tag = \"Row\", attributes = { id = \"theguid-4-header-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"40\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Weapon\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Range\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Type\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"S\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"AP\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"D\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"20\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Abilities\"\n                  , fontStyle = \"Bold\"\n                  , fontSize = \"20\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-0\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Shuriken pistol\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"12\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Pistol 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"0\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Each time you make a wound roll of 6+ for this weapon, that hit is resolved with an AP of -3 instead of 0.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-1\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Star Lance (melee)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"If the bearer charged this turn, attacks with this weapon are made at Strength 8.\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-2\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Star Lance (shooting)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"6\\u{201D}\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Assault 1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"8\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-4\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }}\n                  , {tag = \"Row\", attributes = { id = \"theguid-4-row-3\"\n                  , flexibleHeight = \"1\"\n                  , preferredHeight = \"80\" }, children = { {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Three Horned Attack (War Leader)\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"Melee\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"User\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"-2\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"1\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }}\n                  , {tag = \"Cell\", attributes = {  }, children = { {tag = \"Text\", attributes = { resizeTextForBestFit = \"true\"\n                  , resizeTextMaxSize = \"18\"\n                  , resizeTextMinSize = \"6\"\n                  , text = \"After a model on this mount makes its close combat attacks, you can attack with its mount. Make 2 additional attacks, using this weapon profile\"\n                  , fontStyle = \"Normal\"\n                  , fontSize = \"18\" }, children = {  }} }} }} }} }} }} }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"60\" }, children = { {tag = \"Text\", attributes = { id = \"theguid-modelcount\"\n                  , padding = \"5\"\n                  , height = \"60\"\n                  , alignment = \"UpperLeft\"\n                  , text = \"Default\"\n                  , rectAlignment = \"UpperLeft\"\n                  , width = \"350\"\n                  , resizeTextForBestFit = \"true\"\n                  , horizontalOverflow = \"Wrap\"\n                  , resizeTextMinSize = \"6\"\n                  , fontSize = \"18\"\n                  , resizeTextMaxSize = \"30\" }, children = {  }} }}\n                  , {tag = \"Row\", attributes = { preferredHeight = \"22\" }, children = { {tag = \"HorizontalLayout\", attributes = { rectAlignment = \"UpperRight\"\n                  , preferredHeight = \"22\" }, children = { {tag = \"Button\", attributes = { id = \"theguid-coherency-Red\"\n                  , height = \"22\"\n                  , color = \"#BB2222\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitRed\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Green\"\n                  , height = \"22\"\n                  , color = \"#22BB22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitGreen\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Blue\"\n                  , height = \"22\"\n                  , color = \"#2222BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitBlue\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Purple\"\n                  , height = \"22\"\n                  , color = \"#BB22BB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPurple\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Yellow\"\n                  , height = \"22\"\n                  , color = \"#DDDD22\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitYellow\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-White\"\n                  , height = \"22\"\n                  , color = \"#FFFFFF\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitWhite\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Orange\"\n                  , height = \"22\"\n                  , color = \"#DD6633\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitOrange\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Teal\"\n                  , height = \"22\"\n                  , color = \"#29D9D9\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitTeal\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-Pink\"\n                  , height = \"22\"\n                  , color = \"#DD77CC\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitPink\" }, children = {  }}\n                  , {tag = \"Button\", attributes = { id = \"theguid-coherency-None\"\n                  , height = \"22\"\n                  , color = \"#BBBBBB\"\n                  , width = \"22\"\n                  , onClick = \"theguid/highlightUnitNone\" }, children = {  }} }} }} }} }}, \"thepanelid\", uiId),\n                              \"theguid\", guid),\n                              \"thevisibility\", playerColor)\n  return uiTable\nend\n\nfunction onLoad()\n  self.setVar(\"desc-id\", desc())\n  self.setVar(\"isMaster\", true)\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() and v.getVar(\"isMaster\") and v.getGUID() ~= self.getGUID() then\n      if v.getPosition().x > 9999 and v.getPosition().z > 9999 then\n        log(\"Destroying previous master for this unit: \" .. desc())\n        v.destruct()\n      else\n        log(\"Usurping previous master for this unit: \" .. desc())\n        v.setVar(\"isMaster\", false)\n      end\n    end\n  end\nend\n\nfunction copyUITable(uiTable)\n  local result = {}\n  for k, element in pairs(uiTable) do\n    local newElement = {}\n    newElement[\"tag\"] = element[\"tag\"]\n    if element[\"value\"] ~= nil then\n      newElement[\"value\"], times = string.gsub(element[\"value\"],\"[ ]+\",\" \")\n    end\n    newElement[\"attributes\"] = element[\"attributes\"]\n    newElement[\"children\"] = {}\n    if element[\"children\"] ~= nil then\n      newElement[\"children\"] = copyUITable(element[\"children\"])\n    end\n    table.insert(result, newElement)\n  end\n  return result\nend\n\n\nfunction loadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = createUI(panelId, playerColor)\n  local currentUI = UI.getXmlTable()\n  local inserted = false\n  for k,element in pairs(currentUI) do\n    if element[\"attributes\"] ~= nil and element[\"attributes\"][\"id\"] == panelId then\n      currentUI[k][\"children\"] = uiTable[\"children\"]\n      inserted = true\n    end\n  end\n  if not inserted then\n    table.insert(currentUI, uiTable)\n  end\n  local result = copyUITable(currentUI)\n  UI.setXmlTable(result)\nend\n\nfunction unloadUI(playerColor)\n  local panelId = createName(playerColor)\n  local uiTable = UI.getXmlTable()\n  local panelIndex = -1\n  for index, element in pairs(uiTable) do\n    if element[\"attributes\"][\"id\"] == panelId then\n      panelIndex = index\n      break\n    end\n  end\n  if panelIndex >= 0 then\n    local el = uiTable[panelIndex]\n  end\n  uiCreated[playerColor] = false\nend\n\nuiCreated = {}\n\ntimesActivated = 0\n\nvalidBaseMillis = {\n  {x = 25, z = 25},\n  {x = 30, z = 30},\n  {x = 32, z = 32},\n  {x = 40, z = 40},\n  {x = 50, z = 50},\n  {x = 55, z = 55},\n  {x = 60, z = 60},\n  {x = 100, z = 100},\n  {x = 25, z = 25},\n  {x = 25, z = 75},\n  {x = 75, z = 25},\n  {x = 120, z = 92},\n  {x = 92, z = 120},\n  {x = 170, z = 105},\n  {x = 105, z = 170},\n}\n\nfunction assignBase(inc, model)\n if Global.getTable(\"bs2tts-saved-bases\") == nil then\n  Global.setTable(\"bs2tts-saved-bases\", {})\n end\n local baseMap = Global.getTable(\"bs2tts-saved-bases\")\n local meshFile = model.getCustomObject().mesh\n if baseMap[meshFile] == nil then\n  log(\"Initing base map\")\n  baseMap[meshFile] = 0\n end\n local index = baseMap[meshFile]\n local newIndex = (index + inc) % #validBaseMillis\n log(\"Base map index is now: \" .. tostring(newIndex))\n log(\"Base millis are: \" .. tostring(validBaseMillis[newIndex+1][\"x\"]) .. \" \" .. tostring(validBaseMillis[newIndex+1][\"z\"]))\n baseMap[meshFile] = newIndex\n Global.setTable(\"bs2tts-saved-bases\", baseMap)\nend\n\nfunction determineBase(model)\n  local chosenBase =  {x = 25, z = 25}\n  local milliToInch = 0.0393701\n  \n  if Global.getTable(\"bs2tts-saved-bases\") and Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] then\n    chosenBase = validBaseMillis[Global.getTable(\"bs2tts-saved-bases\")[model.getCustomObject().mesh] + 1]\n    chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n  else\n    local bounds = model.getBoundsNormalized()\n    local xBounds = bounds.size.x\n    local zBounds = bounds.size.z\n    local closestSum = 10000000000\n    log(bounds)\n    for k, base in pairs(validBaseMillis) do\n      local baseInchX = (milliToInch - 0.001) * base.x\n      local baseInchZ = (milliToInch - 0.001) * base.z\n      if xBounds > baseInchX and zBounds > baseInchZ then\n        local distSum = (xBounds - baseInchX) + (zBounds - baseInchZ)\n        if distSum < closestSum then\n          closestSum = distSum\n          chosenBase = base\n        end\n      end\n    end\n    log(chosenBase)\n    if chosenBase == nil then\n      chosenBase = {x = xBounds/2, z = zBounds/2}\n    else\n      chosenBase = {x = (chosenBase.x * milliToInch)/2, z = (chosenBase.z * milliToInch)/2}\n    end\n  end\n  return chosenBase\nend\n\nfunction onScriptingButtonDownTable(params)\n  onScriptingButtonDown(params.index, params.peekerColor)\nend\n\nfunction onScriptingButtonDown(index, peekerColor)\n  local player = Player[peekerColor]\n  local name = createName(peekerColor)\n  if (self.getVar(\"isMaster\") and player.getHoverObject() and player.getHoverObject().getVar(\"desc-id\") == desc()) or\n      (#player.getSelectedObjects() > 0 and player.getSelectedObjects()[1].getVar(\"desc-id\") == desc()) then\n    local target = player.getHoverObject() or  player.getSelectedObjects()[1]\n    if index == 1 then\n        loadUI(peekerColor)\n        Wait.frames(function()\n          updateModelCount()\n          UI.setAttribute(createName(peekerColor), \"active\", true)\n        end, 2)\n    end\n    if index == 2 or index == 3 then\n      local inc = index == 2 and -1 or 1\n      local name = target.getName()\n      local current, total = string.gmatch(name,\"([0-9]+)/([0-9]+)\")()\n      current = math.max(tonumber(current) + inc,0)\n      local newName = string.gsub(name, \"([0-9]+)/([0-9]+)\", tostring(current) .. \"/\" .. total)\n      target.setName(newName)\n    end\n    if index == 4 or index == 5 or index == 8 then\n      local inc = index == 4 and 1 or -1\n      if index == 8 then\n        inc = 0\n      end\n      if target.getVar(\"bs2tts-aura-circle\") == nil then\n        target.setVar(\"bs2tts-aura-circle\", 0)\n      end\n      local newRadius = math.max(target.getVar(\"bs2tts-aura-circle\") + inc,0)\n      target.setVar(\"bs2tts-aura-circle\", newRadius)\n      local circ = {}\n      local base = {}\n      local baseRadiuses = determineBase(target)\n      if newRadius > 0 then\n        circ = getCircleVectorPoints(newRadius, baseRadiuses.x, baseRadiuses.z, target)\n        base = getCircleVectorPoints(0, baseRadiuses.x, baseRadiuses.z, target)\n      end\n\n      target.setVectorLines({\n        {\n            points    = circ,\n            color     = highlighting or {1,0,1},\n            thickness = 0.125 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        },\n        {\n            points    = base,\n            color     = highlighting or {1,0,1},\n            thickness = 0.1 * 1/(target.getScale().x),\n            rotation  = {0,0,0},\n        }\n      })\n      broadcastToAll(\"Measuring \"..tostring(newRadius)..\"\\\"\")\n    end\n    if index == 6 or index == 7 then\n      local inc = 1\n      if index == 7 then\n        inc = -1\n      end\n      assignBase(inc, target)\n      onScriptingButtonDown(8, peekerColor)\n    end\n  end\nend\n\nfunction onObjectDrop(playerColor, obj)\n  scheduleUpdateIfInUnit(obj)\nend\n\nfunction onObjectDestroy(obj)\n  if obj.getGUID() ~= self.getGUID() then\n    scheduleUpdateIfInUnit(obj)\n  end\nend\n\nfunction scheduleUpdateIfInUnit(obj)\nif obj.getVar(\"desc-id\") == desc() then\n  collectUnitModels()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  Timer.create(\n  {\n    identifier = id,\n    function_name = \"updateModelCount\",\n    parameters = {},\n    delay = 0.2\n  }\n)\nend\nend\n\nfunction distance2D(point1, point2)\n  local x = point1.x - point2.x\n  local z = point1.z - point2.z\n  return math.sqrt(x * x + z * z)\nend\n\nunitModels = nil\nunitModelCount = 0\nunitUprightModelCount = 0\n\nfunction collectUnitModels()\n  unitModels = {}\n  unitModelCount = 0\n  unitUprightModelCount = 0\n  for k,v in pairs(getAllObjects()) do\n    if v.getVar(\"desc-id\") == desc() then\n      table.insert(unitModels, v)\n      unitModelCount = unitModelCount + 1\n      if not v.is_face_down then\n        unitUprightModelCount = unitUprightModelCount + 1\n      end\n    end\n  end\n  log(\"Collected \" .. tostring(unitUprightModelCount) .. \" upright models for this unit\")\nend\n\nfunction operateOnModels(fn)\n  if not unitModels then\n    collectUnitModels()\n  end\n  local originModel = nil\n  local dist = 100000000000\n  for k, model in pairs(unitModels) do\n    local newDist = distance2D({x=0,y=0,z=0}, model.getPosition())\n    if not model.is_face_down and newDist < dist then\n      originModel = model\n      dist = newDist\n    end\n  end\n  local seenModels = {}\n  searchModels(originModel, seenModels, fn)\nend\n\nfunction updateModelCount()\n  collectUnitModels()\n  local modelCounts = {}\n  if unitModels then\n    for k, model in pairs(unitModels) do\n      model.highlightOff()\n    end\n  end\n\n  local getModelNames = function(model)\n    if not modelCounts[model.getName()] then\n      modelCounts[model.getName()] = 0\n    end\n    modelCounts[model.getName()] = modelCounts[model.getName()] + 1\n    if highlighting then\n      model.highlightOn(highlighting)\n    end\n  end\n\n  operateOnModels(getModelNames)\n  local label = \"\"\n  local keys = {}\n  for k in pairs(modelCounts) do table.insert(keys, k) end\n  table.sort(keys)\n\n  for index,k in pairs(keys) do\n    local v = modelCounts[k]\n    modelName = string.gsub(k, \"[0-9]+/[0-9]+\",\"\")\n    label = label .. modelName .. \" - \" .. tostring(v) .. \"\\n\"\n  end\n  local theid = self.getGUID() .. \"-modelcount\"\n  UI.setAttribute(theid, \"text\", label )\nend\n\nfunction getCenterDist(obj)\n  local boundsSize = obj.getBoundsNormalized().size\n  local longest = math.max(boundsSize.x, boundsSize.z)\n  return longest/2\nend\n\nfunction arrToS(a)\n  result = \"[] \"\n  for i, k in pairs(a) do\n    result = result .. tostring(k) .. \",\"\n  end\n  result = result .. \" ]\"\n  return result\nend\n\nfunction searchModels(origin, seen, fn)\n  local modelsInRange = 0\n  local rangeModelGUIDS = {}\n  seen[origin.getGUID()] = true\n  for k, model in pairs(unitModels) do\n    if not model.is_face_down and model.getGUID() ~= origin.getGUID() then\n      local originCenterDist = getCenterDist(origin)\n      local modelCenterDist = getCenterDist(model)\n      local dist = distance2D(origin.getPosition(), model.getPosition())\n      if dist < (2.05 + originCenterDist + modelCenterDist) then\n        modelsInRange = modelsInRange + 1\n        table.insert(rangeModelGUIDS, model.getGUID())\n        if (unitUprightModelCount >= 6 and modelsInRange == 2) or (unitUprightModelCount < 6 and modelsInRange == 1) then\n          log(\"Model \" .. tostring(origin.getGUID()) .. \" is in range of \" .. tostring(modelsInRange) .. \" models, namely: \" .. arrToS(rangeModelGUIDS))\n          fn(origin)\n        end\n        if not seen[model.getGUID()] then\n          searchModels(model, seen, fn, modelCount)\n        end\n      end\n    end\n  end\nend\n\nhighlighting = false\n\nfunction highlightUnitRed() highlightUnit(\"Red\") end\nfunction highlightUnitGreen() highlightUnit(\"Green\") end\nfunction highlightUnitBlue() highlightUnit(\"Blue\") end\nfunction highlightUnitPurple() highlightUnit(\"Purple\") end\nfunction highlightUnitYellow() highlightUnit(\"Yellow\") end\nfunction highlightUnitWhite() highlightUnit(\"White\") end\nfunction highlightUnitOrange() highlightUnit(\"Orange\") end\nfunction highlightUnitTeal() highlightUnit(\"Teal\") end\nfunction highlightUnitPink() highlightUnit(\"Pink\") end\n\nfunction highlightUnitNone()\n  highlighting = false\n  updateModelCount()\nend\n\nfunction highlightUnit(color)\n  if highlighting ~= color then\n    highlighting = color\n  else\n    highlighting = false\n  end\n  updateModelCount()\nend\n\nfunction onDestroy()\n  local id = desc() .. \"countModels\"\n  Timer.destroy(id)\n  collectUnitModels()\n  if #unitModels > 1 then\n    local newobj = self.clone({position = {x = 10000, y = 10000, z = 10000}})\n    newobj.setLock(true)\n  end\n  for k,v in pairs(Player.getColors()) do\n    UI.hide(createName(v))\n  end\nend\n\nfunction closeUI(player, val, id)\n  local peekerColor = player.color\n  UI.setAttribute(createName(peekerColor), \"active\", false)\nend\n\nfunction desc()\n  return \"2661b183:1e87-7ef5-0ba7-3667\"\nend\n\nfunction createName(color)\n  local guid = self.getGUID()\n  return \"bs2tts\" .. \"-\" .. color\nend\n\nfunction rotateVector2d(vec, degrees)\n  local sin,cos,toRads = math.sin, math.cos, math.rad\n  local result = {\n    x = vec.x * cos(toRads(degrees)) - vec.z * sin(toRads(degrees)),\n    z = vec.x * sin(toRads(degrees)) + vec.z * cos(toRads(degrees)),\n    y = vec.y\n  }\n  return result\nend\n\nfunction getCircleVectorPoints(radius,baseX, baseZ, obj)\n    local result = {}\n    local scaleFactor = 1/obj.getScale().x\n    local rotationDegrees =  obj.getRotation().y\n    local steps = 64\n    local degrees,sin,cos,toRads = 360/steps, math.sin, math.cos, math.rad\n    for i = 0,steps do\n        table.insert(result,{\n            x = cos(toRads(degrees*i))*((radius+baseX)*scaleFactor),\n            z = sin(toRads(degrees*i))*((radius+baseZ)*scaleFactor),\n            y = 1\n        })\n    end\n    return result\nend\n",
      "LuaScriptState": "",
      "XmlUI": "",
      "GUID": "1ebd48"
    }
  ],
  "LuaScript": "--[[ Lua code. See documentation: https://api.tabletopsimulator.com/ --]]\n\n--[[ The onLoad event is called after the game save finishes loading. --]]\nfunction onLoad()\n    --[[ print('onLoad!') --]]\nend\n\n--[[ The onUpdate event is called once per frame. --]]\nfunction onUpdate()\n    --[[ print('onUpdate loop!') --]]\nend",
  "LuaScriptState": "{\"svbluePlayerID\":\"\",\"svredPlayerID\":\"\"}",
  "XmlUI": "<!-- Xml UI. See documentation: https://api.tabletopsimulator.com/ui/introUI/ -->",
  "VersionNumber": "v12.4.3"
}